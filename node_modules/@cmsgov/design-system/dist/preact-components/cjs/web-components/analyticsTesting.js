"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mockTealium = mockTealium;
exports.testAnalytics = testAnalytics;
exports.unmockTealium = unmockTealium;
exports.waitForAnalytics = waitForAnalytics;
function mockTealium() {
  const tealiumMock = jest.fn();
  window.utag = {
    link: tealiumMock
  };
  jest.useFakeTimers();
  return tealiumMock;
}
function unmockTealium() {
  jest.resetAllMocks();
  jest.useRealTimers();
}
function waitForAnalytics() {
  jest.advanceTimersToNextTimer();
  new Promise(resolve => setTimeout(resolve, 0));
}
function testAnalytics(testName, fn) {
  test(testName, async () => {
    const tealiumMock = mockTealium();
    const returnVal = await fn({
      tealiumMock,
      waitForAnalytics
    });
    unmockTealium();
    return returnVal;
  });
}
testAnalytics.skip = (testName, fn) => {
  test.skip(testName, () => fn({}));
};